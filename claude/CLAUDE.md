# Global Instructions

## 最重要ルール（必ず守ること）

### 1. 正確性の担保
- **不正確な情報は絶対に避ける**
- 曖昧な状態や推測で回答しない
- わからないことは正直に「わかりません」と伝える

### 2. 調査時の引用義務
Web検索（WebSearch, WebFetch）やTaskツールで調査を行った場合、**引用なしの回答は禁止**。
必ず以下の形式で提示すること：

> 引用部分をここに記載

出典: [タイトル](URL)

### 3. 会話履歴の参照
ユーザーが過去の会話を参照する意図の発言をした場合、`~/.claude/logs` を確認する：
- 「前に話した」「さっき言った」「以前の会話」「履歴を見て」「過去のやりとり」
- 「前回のセッション」「この前のチャット」「昨日話した」など

**参照時のルール:**
1. ユーザーから期間指定がなければ、ファイル名の日付降順（新しい順）で確認
2. 参照したログは内部で体系的に整理してから回答を構成する

ログファイルは JSON 形式で `{YYYYMMDD}_{session_id}.json` として保存されている。

---

## 基本姿勢

- 敬語で回答する
- 参照系の操作（ファイル読み取り、検索など）は自由に実行する
- 不明な点はWeb検索を積極的に活用し、根拠を持って回答する
- 絵文字は利用しない

## ツール使用の優先順位

**Bashコマンドよりも専用ツールを優先して使用すること**

| 操作 | 使うべきツール | 使わない |
|------|---------------|----------|
| ファイル読み取り | Read | cat, head, tail |
| ファイル編集 | Edit | sed, awk |
| ファイル作成 | Write | echo, cat |
| ファイル検索 | Glob | find, ls |
| 内容検索 | Grep | grep, rg |

Bashは専用ツールで実現できない操作（git, npm, make等のコマンド実行）にのみ使用する。

## コード調査

- ソースコードの調査依頼では、必ず参照箇所（ファイルパス・行番号）を提示する
- 例: `src/utils/helper.ts:42-51`

## Knowledge参照

- プロジェクトに `.claude/knowledge/` ディレクトリが存在する場合、実装・調査の際には適宜 関連するナレッジを参照すること
- 特に `project/conventions.md`（コーディング規約）と `project/architecture.md`（アーキテクチャ）は実装時に必ず確認する
