---
allowed-tools: Read, Bash(ls:*, cat:*, git:*), Grep, Glob
description: コードレビュー（差分ベース）
---

# コードレビュー

`git diff main...HEAD` の差分を確認し、変更部分に絞ってレビューします。

## レビュー対象外

以下のファイルのような自動生成されたものはスキップ：
- `*.lock`

## レビュー観点
MUST, IMO, NITS, Qの4つの観点でレビューすること。

- 変更前と変更がない部分のレビューは不要
- 設計書との整合性（CLAUDE.mdやknowledgeがある場合、先にそちらを確認して知見を集める）
- セキュリティ上の問題
- パフォーマンス懸念
- TODOコメントが記載されていれば実装が不完全などの指摘は不要

## 出力ルール

- 修正が必要な点だけ指摘
- 必要に応じて、修正案も同時に提示
- ファイル名は相対パスで表記

## 出力形式

```
## レビュー結果

### [MUST]
対応必須の問題（バグ、セキュリティ、重大な設計ミス）

- **path/to/file.ts:42** - 問題の説明
  ```diff
  - 問題のコード
  + 修正案
  ```

### [MUST]
他の指摘があれば...

### [IMO]
より良くなる改善提案（採用は任意）

- **path/to/file.ts:100** - 提案内容

### [NITS]
細かい指摘（typo、フォーマット等）

- **path/to/file.ts:150** - 指摘内容

### [Q]
意図の確認や議論したい点

- **path/to/file.ts:200** - 質問内容
```

該当がないカテゴリは省略可。